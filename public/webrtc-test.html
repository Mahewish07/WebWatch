<!DOCTYPE html>
<html>
<head>
    <title>WebRTC Test</title>
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
</head>
<body>
    <h1>üé• WebRTC Connection Test</h1>
    <div id="status">Testing...</div>
    <div id="logs" style="height: 300px; overflow-y: scroll; border: 1px solid #ccc; padding: 10px;"></div>
    
    <script>
        const statusDiv = document.getElementById('status');
        const logsDiv = document.getElementById('logs');
        
        function log(message) {
            console.log(message);
            logsDiv.innerHTML += '<p>' + new Date().toLocaleTimeString() + ': ' + message + '</p>';
            logsDiv.scrollTop = logsDiv.scrollHeight;
        }
        
        async function testWebRTC() {
            try {
                log('üîç Starting WebRTC test...');
                
                // Test Socket.IO connection
                const socket = io('http://192.168.200.29:5000');
                
                socket.on('connect', () => {
                    log('‚úÖ Socket.IO connected');
                    statusDiv.innerHTML = 'Connected ‚úÖ';
                });
                
                socket.on('offer', (data) => {
                    log('üì® Received offer: ' + JSON.stringify(data, null, 2));
                });
                
                socket.on('answer', (data) => {
                    log('üì® Received answer: ' + JSON.stringify(data, null, 2));
                });
                
                socket.on('ice-candidate', (data) => {
                    log('üì® Received ICE candidate: ' + JSON.stringify(data.candidate, null, 2));
                });
                
                socket.on('room_update', (data) => {
                    log('üì° Room update: ' + JSON.stringify(data));
                });
                
                socket.on('join_room_success', (data) => {
                    log('‚úÖ Room joined: ' + JSON.stringify(data));
                });
                
                socket.on('signaling_error', (data) => {
                    log('‚ùå Signaling error: ' + JSON.stringify(data));
                });
                
                socket.on('connect_error', (error) => {
                    log('‚ùå Connection error: ' + error);
                    statusDiv.innerHTML = 'Connection Failed ‚ùå';
                });
                
            } catch (error) {
                log('‚ùå Test failed: ' + error);
                statusDiv.innerHTML = 'Test Failed ‚ùå';
            }
        }
        
        window.onload = testWebRTC;
    </script>
</body>
</html>